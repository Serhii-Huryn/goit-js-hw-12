{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst items = [];\n\nexport default function createMarkup(images) {\n  const items = [];\n  for (const image of images) {\n    const item = document.createElement('li');\n    item.classList.add('gallery-item');\n    const a = document.createElement('a');\n    a.classList.add('gallery-link');\n    a.href = image['largeImageURL'];\n    const img = document.createElement('img');\n    img.classList.add('gallery-image');\n    img.setAttribute('src', image['webformatURL']);\n    img.setAttribute('alt', image['tags']);\n\n    const pContainer = document.createElement('div');\n    pContainer.classList.add('gallery-descr-container');\n    // redone with map or else ------------------------------------------------------------------------------------------------------------------------------------------\n    const pSubContainer1 = document.createElement('div');\n    const pSubContainer2 = document.createElement('div');\n    const pSubContainer3 = document.createElement('div');\n    const pSubContainer4 = document.createElement('div');\n\n    const p1 = document.createElement('p');\n    const p2 = document.createElement('p');\n    const p3 = document.createElement('p');\n    const p4 = document.createElement('p');\n    const p5 = document.createElement('p');\n    const p6 = document.createElement('p');\n    const p7 = document.createElement('p');\n    const p8 = document.createElement('p');\n    p1.classList.add('gallery-descr');\n    p2.classList.add('gallery-descr');\n    p3.classList.add('gallery-descr');\n    p4.classList.add('gallery-descr');\n    p5.classList.add('gallery-descr');\n    p6.classList.add('gallery-descr');\n    p7.classList.add('gallery-descr');\n    p8.classList.add('gallery-descr');\n    p1.textContent = `Likes`;\n    p5.textContent = `${image['likes']}`;\n    p2.textContent = `Views`;\n    p6.textContent = `${image['views']}`;\n    p3.textContent = `Comments`;\n    p7.textContent = `${image['comments']}`;\n    p4.textContent = `Downloads`;\n    p8.textContent = `${image['downloads']}`;\n\n    a.append(img);\n    pSubContainer1.append(p1, p5);\n    pSubContainer2.append(p2, p6);\n    pSubContainer3.append(p3, p7);\n    pSubContainer4.append(p4, p8);\n    pContainer.append(\n      pSubContainer1,\n      pSubContainer2,\n      pSubContainer3,\n      pSubContainer4\n    );\n    a.append(pContainer);\n    item.append(a);\n\n    items.push(item);\n  }\n  gallery.append(...items);\n\n  const gallerySimpleLightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n  });\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport axios from 'axios';\n\nimport createMarkup from './render-functions';\n\nconst input = document.querySelector('#search-field');\nconst loading = document.querySelector('.loading');\nconst gallery = document.querySelector('.gallery');\nconst loadMore = document.querySelector('.load-more');\n\nlet searchWord = '';\nlet images = [];\nlet currentPage = 1;\nlet per_page = 15;\nlet lastPage;\n\nconst fetchPhotos = async url => {\n  try {\n    const response = await axios(url);\n    if (!response) {\n      iziToast.show({\n        message: error.message + ' error 1',\n        backgroundColor: 'red',\n      });\n    }\n    return response.data;\n  } catch (error) {\n    // iziToast.show({\n    //   message: error.message + ' error',\n    //   backgroundColor: 'red',\n    // });\n    return error;\n  }\n};\n\nexport default async function searching(event) {\n  event.preventDefault();\n  currentPage = 1;\n\n  loading.classList.add('visually-hidden');\n  searchWord = input.value.trim();\n  input.value = '';\n\n  if (!searchWord) {\n    return;\n  }\n\n  const params = new URLSearchParams({\n    key: '47410848-ca90cbe53fb16c342854d4794',\n    q: searchWord,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: per_page,\n    page: currentPage,\n  });\n\n  const url = `https://pixabay.com/api/?${params}`;\n\n  loading.classList.remove('visually-hidden');\n  gallery.innerHTML = '';\n\n  fetchPhotos(url)\n    .then(response => {\n      if (response.message) {\n        if (response.message.toLowerCase().includes('error')) {\n          throw new Error(response.message);\n        }\n      }\n      if (response.statusText) {\n        throw new Error(response.status);\n      }\n      return response;\n    })\n    .then(post => {\n      lastPage = Math.ceil(post.totalHits / per_page);\n\n      images = post.hits;\n      if (!images.length) {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: '#FFA000',\n        });\n        gallery.innerHTML = '';\n        loading.classList.add('visually-hidden');\n        loadMore.classList.add('visually-hidden');\n        return;\n      }\n\n      if (currentPage >= lastPage) {\n        iziToast.show({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          backgroundColor: '#0099FF',\n        });\n        loading.classList.add('visually-hidden');\n        loadMore.classList.add('visually-hidden');\n        currentPage = 1;\n      }\n\n      createMarkup(images);\n      loading.classList.add('visually-hidden');\n\n      if (currentPage < lastPage) {\n        loadMore.classList.remove('visually-hidden');\n      }\n    })\n    .catch(error => {\n      iziToast.show({\n        message: error.message + ' error 2',\n        backgroundColor: 'red',\n      });\n      gallery.innerHTML = '';\n      loading.classList.add('visually-hidden');\n      loadMore.classList.add('visually-hidden');\n    });\n}\n\nexport async function searchingMore() {\n  currentPage++;\n\n  loading.classList.remove('visually-hidden');\n  if (currentPage < lastPage) {\n    loadMore.classList.remove('visually-hidden');\n  }\n\n  const params = new URLSearchParams({\n    key: '47410848-ca90cbe53fb16c342854d4794',\n    q: searchWord,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: per_page,\n    page: currentPage,\n  });\n\n  const url = `https://pixabay.com/api/?${params}`;\n\n  fetchPhotos(url)\n    .then(response => {\n      if (response.message) {\n        if (response.message.toLowerCase().includes('error')) {\n          throw new Error(response.message);\n        }\n      }\n      if (response.statusText) {\n        throw new Error(response.status);\n      }\n      return response;\n    })\n    .then(post => {\n      lastPage = Math.ceil(post.totalHits / per_page);\n\n      images = post.hits;\n      if (!images.length) {\n        iziToast.show({\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          backgroundColor: '#FFA000',\n        });\n        loading.classList.add('visually-hidden');\n        loadMore.classList.add('visually-hidden');\n        return;\n      }\n\n      if (currentPage >= lastPage) {\n        iziToast.show({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          backgroundColor: '#0099FF',\n        });\n        loading.classList.add('visually-hidden');\n        loadMore.classList.add('visually-hidden');\n        currentPage = 1;\n      }\n\n      createMarkup(images);\n      loading.classList.add('visually-hidden');\n\n      const itemHeight = document\n        .querySelector('.gallery-item')\n        .getBoundingClientRect().height;\n      window.scrollBy({\n        top: itemHeight * 2 + 24,\n        behavior: 'smooth',\n      });\n    })\n    .catch(error => {\n      iziToast.show({\n        message: error.message + ' error 3',\n        backgroundColor: 'red',\n      });\n      loading.classList.add('visually-hidden');\n      gallery.innerHTML = '';\n    });\n}\n","import searching from './js/pixabay-api';\nimport { searchingMore } from './js/pixabay-api';\n\nconst searchBtn = document.querySelector('.form');\nconst loadMore = document.querySelector('.load-more');\n\nsearchBtn.addEventListener('submit', searching, event);\nloadMore.addEventListener('click', searchingMore);\n"],"names":["gallery","createMarkup","images","items","image","item","a","img","pContainer","pSubContainer1","pSubContainer2","pSubContainer3","pSubContainer4","p1","p2","p3","p4","p5","p6","p7","p8","SimpleLightbox","input","loading","loadMore","searchWord","currentPage","per_page","lastPage","fetchPhotos","url","response","axios","iziToast","error","searching","event","post","searchingMore","itemHeight","searchBtn"],"mappings":"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"}